<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>task2_17</title>
</head>
<style type="text/css">
  .wrapper{
    width: 400px;
    margin: 200px auto;
    font-size: 1.25rem;
    font-family: "Microsoft Yahei";
  }
  input{
    width:200px;height: 25px;
    vertical-align: middle;
    margin:15px; border-radius: 5px;
    border:1px solid #000;
  }
  button{
    background-color: #000;
    color:#fff; border: 0px;
    width:50px; height:30px;
    border-radius: 5px;
  }
  p{
    font-size: 14px;color:#777;
    margin-left: 63px;margin-top: -7px;
  }
</style>
<body>
  <div class="wrapper">
    <label>名称
      <input type="text" name="name" id="name">
      <button onclick="check()">验证</button>
    </label>
    <p>必填，长度为4-16个字符</p>
  </div>
  <script type="text/javascript">
    function check(){
      var input = document.getElementById('name');
      var show = document.querySelector("p");
      var getLength=function(){
        var count =0;
        for( let i=0;i<input.value.length;i++){
          if(input.value.match(/[0-9a-zA-Z]/)){
            count++;
          }else if(input.value.match(/[\u4e00-\u9fa5]/)){
            count=count+2;
          }
        }
        return count;
      }
      if(input.value===""){
        input.style.border="1px solid red";
        show.style.color="red";
        show.innerHTML="姓名不能为空";
      }else if(getLength()<4||getLength()>16){
        input.style.border="1px solid red";
        show.style.color="red";
        show.innerHTML="长度为4-16个字符";
      }else{
        input.style.border="1px solid green";
        show.style.color="green";
        show.innerHTML="格式正确";
      }
    }
  </script>
</body>
</html>